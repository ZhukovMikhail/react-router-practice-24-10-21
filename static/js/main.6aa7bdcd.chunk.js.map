{"version":3,"sources":["Components/MoviesList/MoviesList.jsx","services/fetchApi.js","Views/Home/HomePage.jsx","Views/MovieDetailsPage/MovieDetailsPage.jsx","Views/MoviesPage/MoviesPage.jsx","Components/NaviBar/NaviBar.jsx","App.js","index.js"],"names":["MoviesList","movies","location","useLocation","map","movie","to","pathname","id","state","from","search","original_title","axios","defaults","baseURL","API_KEY","a","get","results","data","getMoviesByQuery","query","HomePage","useState","setMovies","useEffect","getTrendingMpvies","then","MovieDetailsPage","params","useParams","history","useHistory","setMovie","getMovieById","movieId","onClick","push","type","title","src","poster_path","alt","MoviesPage","setQuery","prevQuery","split","onSubmit","e","preventDefault","onChange","target","value","NaviBar","App","className","path","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6aa7bdcd.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useLocation } from 'react-router';\r\n\r\nexport default function MoviesList({ movies }) {\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <ul>\r\n      {movies.map(movie => {\r\n        return (\r\n          <li key={movie.id}>\r\n            <Link\r\n              to={{\r\n                pathname: `/movies/${movie.id}`,\r\n                state: {\r\n                  from:\r\n                    location.pathname === '/'\r\n                      ? '/'\r\n                      : '/movies' + location.search,\r\n                },\r\n              }}\r\n            >\r\n              <h3>{movie.original_title}</h3>\r\n            </Link>\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n}\r\n","import axios from 'axios';\r\naxios.defaults.baseURL = 'https://api.themoviedb.org/3';\r\nconst API_KEY = `3d673b2d8e40eafc68577fae5a6a1f4b`;\r\nexport default async function getTrendingMpvies() {\r\n  const {\r\n    data: { results },\r\n  } = await axios.get(`/trending/all/day?api_key=${API_KEY}`);\r\n  return results;\r\n}\r\nexport async function getMoviesByQuery(query) {\r\n  const {\r\n    data: { results },\r\n  } = await axios.get(`/search/movie?api_key=${API_KEY}&query=${query}`);\r\n  return results;\r\n}\r\n\r\nexport async function getMovieById(id) {\r\n  const { data } = await axios.get(`/movie/${id}?api_key=${API_KEY}`);\r\n  return data;\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport MoviesList from '../../Components/MoviesList/MoviesList';\r\nimport getTrendingMpvies from '../../services/fetchApi';\r\n\r\nexport default function HomePage() {\r\n  const [movies, setMovies] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getTrendingMpvies().then(setMovies);\r\n  }, []);\r\n  return (\r\n    <div>\r\n      <h1>Home Page</h1>\r\n      <MoviesList movies={movies} />\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport { getMovieById } from '../../services/fetchApi';\r\nimport { useParams, useLocation, useHistory } from 'react-router';\r\nconst imgUrl = 'https://image.tmdb.org/t/p/w500/';\r\n\r\nexport default function MovieDetailsPage() {\r\n  const params = useParams();\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n\r\n  const [movie, setMovie] = useState(null);\r\n\r\n  const handleGoBack = () => {\r\n    if (location.state?.from) {\r\n      history.push(location.state?.from);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getMovieById(params.movieId).then(setMovie);\r\n  }, [params.movieId]);\r\n  if (movie === null) {\r\n    return <h1>Такого нет</h1>;\r\n  }\r\n  return (\r\n    <div>\r\n      <button onClick={handleGoBack} type=\"button\">\r\n        Назад\r\n      </button>\r\n      <h1>{movie.title}</h1>\r\n\r\n      <img src={imgUrl + movie.poster_path} alt=\"\" />\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { getMoviesByQuery } from '../../services/fetchApi';\r\nimport MoviesList from '../../Components/MoviesList/MoviesList';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nexport default function MoviesPage() {\r\n  const history = useHistory();\r\n  const [query, setQuery] = useState('');\r\n  const [movies, setMovies] = useState([]);\r\n  useEffect(() => {\r\n    if (history.location?.search !== '') {\r\n      const prevQuery = history.location?.search.split('=')[1];\r\n      getMoviesByQuery(prevQuery).then(setMovies);\r\n      setQuery(prevQuery);\r\n      //   console.log(history.location?.search);\r\n    }\r\n  }, [history.location?.search]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    getMoviesByQuery(query).then(setMovies);\r\n    history.push({ ...history.location, search: `?query=${query}` });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>MoviesPage</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          onChange={e => setQuery(e.target.value)}\r\n          value={query}\r\n        />\r\n\r\n        <button type=\"submit\">Search</button>\r\n      </form>\r\n      <MoviesList movies={movies} />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nexport default function NaviBar() {\r\n  return (\r\n    <div>\r\n      <NavLink to=\"/\">Home</NavLink>\r\n      <NavLink to=\"/movies\">Movies</NavLink>\r\n    </div>\r\n  );\r\n}\r\n","import { Route, Switch } from 'react-router';\nimport HomePage from './Views/Home/HomePage.jsx';\nimport MovieDetailsPage from './Views/MovieDetailsPage/MovieDetailsPage.jsx';\nimport MoviesPage from './Views/MoviesPage/MoviesPage.jsx';\nimport './App.css';\nimport NaviBar from './Components/NaviBar/NaviBar.jsx';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <NaviBar />\n      <Switch>\n        <Route path=\"/\" exact>\n          <HomePage />\n        </Route>\n        <Route path=\"/movies/:movieId\">\n          <MovieDetailsPage />\n        </Route>\n        <Route path=\"/movies\">\n          <MoviesPage />\n        </Route>\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}